<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./assets/images/favicon-32x32.png"
    />
    <link rel="stylesheet" href="style.css" />
    <title>
      Frontend Mentor | Newsletter sign-up form with success message
    </title>
  </head>
  <body>
    <main id="main">
      <img src="./assets/images/illustration-sign-up-mobile.svg" alt="" />
      <div class="sub">
        <h1>Stay updated!</h1>
        <p>Join 60,000+ product managers receiving monthly updates on:</p>
        <div class="checklist">
          <p>Product discovery and building what matters</p>
          <p>Measuring to ensure updates are a success</p>
          <p>And much more!</p>
        </div>
        <div class="form">
          <div>
            <p>Email address</p>
            <span id="wrongMail">Valid email required</span>
          </div>
          <input
            id="email"
            class=""
            type="email"
            placeholder="email@company.com"
          />
          <button onclick="validation()">
            Subscribe to monthly newsletter
          </button>
        </div>
      </div>
    </main>

    <div id="confirm" style="display: none">
      <div>
        <h1>Thanks for subscribing!</h1>
        <p>
          A confirmation email has been sent to
          <span id="confirmedMail"></span>. Please open it and click the button
          inside to confirm your subscription.
        </p>
      </div>

      <a href="../">Dismiss message</a>
    </div>
  </body>

  <script>
    const validation = () => {
      const mail = document.getElementById("email");
      const wrongMail = document.getElementById("wrongMail");
      const mailValidation = (email) => {
        const re =
          /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(String(email).toLowerCase());
      };

      const main = document.getElementById("main");
      const confirm = document.getElementById("confirm");
      const confirmedMail = document.getElementById("confirmedMail");

      if (mailValidation(mail.value)) {
        main.style.display = "none";
        confirmedMail.textContent = mail.value;
        confirm.style.display = "flex";
      } else {
        wrongMail.style.display = "block";
        mail.classList.add("wrongMail");
      }
    };
  </script>
</html>
